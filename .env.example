# Calgary Council Stream Recorder Configuration

# Recording Resilience Settings
# ==============================

# Recording format: mkv (safest), mp4, or ts
# MKV (Matroska) is the most resilient format - can be played even if recording is interrupted
# MP4 requires proper closing - use fragmented MP4 mode for better resilience
# TS (MPEG Transport Stream) is also very resilient but larger files
RECORDING_FORMAT=mkv

# Enable segmented recording (records in chunks, e.g., 15-minute segments)
# This ensures you never lose more than one segment if something goes wrong
# Segments are automatically merged after recording completes
ENABLE_SEGMENTED_RECORDING=true

# Segment duration in seconds (default: 900 = 15 minutes)
SEGMENT_DURATION=900

# Enable automatic reconnection if stream has issues
# Helps maintain recording even if there are brief network interruptions
RECORDING_RECONNECT=true

# Post-Processing Settings
# =========================

# Enable automatic post-processing to split recordings by silence
ENABLE_POST_PROCESSING=false

# Silence threshold in dB (more negative = stricter)
POST_PROCESS_SILENCE_THRESHOLD_DB=-40

# Minimum silence duration to consider as a break (in seconds)
POST_PROCESS_MIN_SILENCE_DURATION=120

# Transcription Settings
# =======================

# Enable automatic transcription with speaker diarization
ENABLE_TRANSCRIPTION=false

# Whisper model size: tiny, base, small, medium, large
# Larger models are more accurate but slower
WHISPER_MODEL=base

# HuggingFace token for speaker diarization (required for transcription)
# Get one at https://huggingface.co/settings/tokens
HUGGINGFACE_TOKEN=

# General Settings
# ================

# Output directory for recordings
OUTPUT_DIR=./recordings

# Database directory
DB_DIR=./data

# Web server settings
WEB_HOST=0.0.0.0
WEB_PORT=5000

# FFmpeg path (leave as 'ffmpeg' to use system default)
FFMPEG_COMMAND=ffmpeg

# yt-dlp path (leave as 'yt-dlp' to use system default)
YTDLP_COMMAND=yt-dlp
